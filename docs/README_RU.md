# Polyglot Keeper

üá∫üá∏ [English](../README.md) | üá∑üá∫ [–†—É—Å—Å–∫–∏–π](README.ru.md)

[![npm version](https://img.shields.io/npm/v/polyglot-keeper.svg?style=flat-square)](https://www.npmjs.com/package/polyglot-keeper)
[![npm downloads](https://img.shields.io/npm/dm/polyglot-keeper.svg?style=flat-square)](https://www.npmjs.com/package/polyglot-keeper)
[![License: MIT](https://img.shields.io/npm/l/polyglot-keeper.svg?style=flat-square)](https://github.com/davidaganov/polyglot-keeper/blob/main/LICENSE)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ i18n –Ω–∞ –±–∞–∑–µ –ò–ò, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–ª—é—á–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö —Ñ–∞–π–ª–∞—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ markdown.

–†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º (React, Vue, Svelte, Angular) –∏ –ª—é–±–æ–π i18n-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π.

|               –î–æ                |               –ü–æ—Å–ª–µ               |
| :-----------------------------: | :-------------------------------: |
| ![–î–æ](./screenshots/before.png) | ![–ü–æ—Å–ª–µ](./screenshots/after.png) |

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–µ—Ä–µ–≤–æ–¥ —Å –ø–æ–º–æ—â—å—é –ò–ò** ‚Äî –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ Gemini, OpenAI –∏–ª–∏ Anthropic.
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Äî –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã (`off` / `on` / `carefully`).
- **–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ü–µ–ª–µ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ–ª–Ω–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –ø–æ—Ä—è–¥–∫–æ–º –∫–ª—é—á–µ–π –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
- **–û—á–∏—Å—Ç–∫–∞** ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–∫–∞–ª–∏.
- **–ù–∞–¥—ë–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∏ –∑–∞–¥–µ—Ä–∂–µ–∫.
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** ‚Äî –ü–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä CLI, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç**

```bash
npm install -D polyglot-keeper
```

**2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç**

```bash
npx polyglot-keeper init
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª—ã `polyglot.config.json` –∏ `.env`.

**3. –î–æ–±–∞–≤—å—Ç–µ API-–∫–ª—é—á**

–û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ API-–∫–ª—é—á –≤–∞—à–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Gemini, OpenAI –∏–ª–∏ Anthropic).

```
POLYGLOT_API_KEY=–≤–∞—à_api_–∫–ª—é—á
```

**4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è JSON-–ª–æ–∫–∞–ª–µ–π
npx polyglot-keeper sync

# –ò–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Markdown-—Ñ–∞–π–ª–æ–≤
npx polyglot-keeper sync --md
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `polyglot.config.json`.

<details>
<summary><b>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</b></summary>

```json
{
  "envFile": ".env",
  "json": {
    "provider": "gemini",
    "model": "gemini-flash-latest",
    "envVarName": "POLYGLOT_API_KEY",
    "localeFormat": "short",
    "locales": ["EN", "RU"],
    "defaultLocale": "EN",
    "localesDir": "src/i18n",
    "trackChanges": "carefully",
    "batchSize": 200,
    "batchDelay": 2000,
    "retryDelay": 35000,
    "maxRetries": 3
  },
  "markdown": {
    "provider": "gemini",
    "model": "gemini-flash-latest",
    "envVarName": "POLYGLOT_MD_API_KEY",
    "contentDir": "content",
    "defaultLocale": "en",
    "locales": ["en", "ru"],
    "trackChanges": "carefully",
    "batchSize": 200,
    "batchDelay": 2000,
    "retryDelay": 35000,
    "maxRetries": 3
  }
}
```

</details>

### –§–æ—Ä–º–∞—Ç—ã –ª–æ–∫–∞–ª–µ–π

- `short`: –ü—Ä–æ—Å—Ç—ã–µ –∫–æ–¥—ã –ª–æ–∫–∞–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `en.json`, `ru.json`)
- `pair`: –§–æ—Ä–º–∞—Ç BCP 47 (–Ω–∞–ø—Ä–∏–º–µ—Ä, `en-US.json`, `ru-RU.json`)

### –†–µ–∂–∏–º—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–ª—é—á–∏. –í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å `trackChanges` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö:

- `"off"` ‚Äî –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- `"on"` ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤—Å–µ —Ü–µ–ª–µ–≤—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞.
- `"carefully"` ‚Äî –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º. CLI –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–ª–∏ –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª `.polyglot-lock.json`. –ó–∞–º–æ—Ä–æ–∑–∫–∞ –∫–ª—é—á–∞ –∑–∞—â–∏—â–∞–µ—Ç –µ–≥–æ –æ—Ç –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø–µ—Ä–µ–ø–µ—Ä–µ–≤–æ–¥–æ–≤ (—É–¥–æ–±–Ω–æ –¥–ª—è —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sync --force`, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏.

---

## üíª –ö–æ–º–∞–Ω–¥—ã CLI

| –ö–æ–º–∞–Ω–¥–∞                            | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
| :--------------------------------- | :---------------------------------------------------- |
| `npx polyglot-keeper init`         | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏              |
| `npx polyglot-keeper sync`         | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ JSON-—Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª–µ–π       |
| `npx polyglot-keeper sync --md`    | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ Markdown-—Ñ–∞–π–ª—ã           |
| `npx polyglot-keeper sync --force` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏ –∑–∞–Ω–æ–≤–æ |

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- –î–µ–π—Å—Ç–≤—É—é—â–∏–π API-–∫–ª—é—á –¥–ª—è Google Gemini, OpenAI –∏–ª–∏ Anthropic

---

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npm install`
2. –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π PR –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:

```bash
npm run lint
npm run typecheck
npm run test
npm run build
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© David Aganov
